<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Delivery IRL — Симулятор Курьера</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=99836553-15c4-4c1f-b8ef-791b2d40a781"
        type="text/javascript"></script>

    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
        }

        #pano {
            width: 100%;
            height: 100%;
            background-color: #222;
        }

        #ui-overlay {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 280px;
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #ffcc00;
            border-radius: 15px;
            padding: 15px;
            color: white;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .stats {
            margin-bottom: 10px;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }

        .cash {
            color: #00ff00;
            font-weight: bold;
            font-size: 1.2em;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #ffcc00;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: #e6b800;
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        #order-info {
            margin-top: 10px;
            font-size: 0.9em;
            min-height: 40px;
        }
    </style>
</head>

<body>

    <div id="pano"></div>

    <div id="ui-overlay">
        <div class="stats">
            Баланс: <span class="cash"><span id="balance">0</span> ₽</span>
        </div>
        <div id="order-info">Заказов пока нет</div>
        <button id="main-btn" onclick="startOrder()">ВЗЯТЬ ЗАКАЗ</button>
    </div>

    <script type="text/javascript">
        let panoramaPlayer;
        let balance = 0;
        // ВСТАВЬ ТУТ КЛЮЧ ОТ STATIC API (ВТОРОЙ СЕРВИС)
        const staticApiKey = 'cdaa77e9-4c18-4bc2-bf84-1441b1315ac6';

        ymaps.ready(function () {
            const startCoords = [59.939095, 30.315868]; // Питер
            ymaps.panorama.locate(startCoords).done(function (panoramas) {
                if (panoramas.length > 0) {
                    panoramaPlayer = new ymaps.panorama.Player('pano', panoramas[0], {
                        controls: ['zoomControl', 'fullscreenControl']
                    });
                } else {
                    document.getElementById('pano').innerHTML = '<h2 style="color:white;text-align:center;padding-top:20%;">Ошибка загрузки панорам</h2>';
                }
            });
        });

        function startOrder() {
            const btn = document.getElementById('main-btn');
            const info = document.getElementById('order-info');

            // Координаты для мини-карты
            const targetLat = 59.93 + (Math.random() * 0.01);
            const targetLng = 30.31 + (Math.random() * 0.02);

            // Ссылка на Static API
            const mapImg = `https://static-maps.yandex.ru/v1?ll=${targetLng},${targetLat}&z=13&pt=${targetLng},${targetLat},pm2rdm&size=250,150&apikey=${staticApiKey}`;

            btn.disabled = true;
            btn.innerText = "В ПУТИ...";
            info.innerHTML = `
                <div style="margin: 5px 0">Точка на карте:</div>
                <img src="${mapImg}" style="width:100%; border-radius:10px; border:1px solid #444; margin-top:5px;">
            `;

            setTimeout(() => {
                balance += 350;
                document.getElementById('balance').innerText = balance;
                btn.disabled = false;
                btn.innerText = "ВЗЯТЬ ЗАКАЗ";
                info.innerHTML = "<span style='color:#00ff00'>Доставлено! +350₽</span>";
            }, 5000);
        }
    </script>
</body>

</html>